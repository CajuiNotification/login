try{const a=firebase.firestore();"sim"===localStorage.getItem("sessionOn")&&firebase.auth().onAuthStateChanged(function(b){a.collection("usuarios(Site)").where("uid","==",b.uid).get().then(b=>{b.forEach(b=>{const c=b.id;a.collection("usuarios(Site)").doc(c).collection("perfis").get().then(a=>{a.forEach(a=>{window.location.href="padr\xE3o"===a.data().perfil?"https://cajuinotification.github.io/principal/":"https://cajuinotification.github.io/cadastro-notificacao/"})}).catch(a=>{alert(a.message)})})}).catch(a=>{alert(a.message)})});class b{constructor(a,b){this.email=a,this.senha=b}logar(){document.querySelector("div[class='container-loader']").style.display="block",firebase.auth().signInWithEmailAndPassword(this.email,this.senha).then(b=>{const c=b.user,d=c.uid;localStorage.setItem("Uid",d),a.collection("usuarios(Site)").where("uid","==",d).get().then(b=>{b.forEach(b=>{const c=b.id;a.collection("usuarios(Site)").doc(c).collection("perfis").get().then(a=>{a.forEach(a=>{"padr\xE3o"===a.data().perfil?(document.querySelector("div[class='container-loader']").style.display="none",window.location.href="https://cajuinotification.github.io/principal/"):(document.querySelector("div[class='container-loader']").style.display="none",window.location.href="https://cajuinotification.github.io/cadastro-notificacao/")})}).catch(a=>{alert(a.message)})})}).catch(a=>{alert(a.message)})}).catch(a=>{document.querySelector("div[class='container-loader']").style.display="none","auth/user-not-found"==a.code||"auth/invalid-email"==a.code||"auth/configuration-not-found"==a.code?alert("Email invalido"):"auth/wrong-password"==a.code?!0===confirm("Senha invalida\nDeseja recuperar sua conta?")&&firebase.auth().sendPasswordResetEmail(this.email).then(()=>{alert("Email enviado com sucesso")}).catch(a=>{alert(a.message)}):"auth/too-many-requests"==a.code?!0===confirm("Devido a muitas tentativas de login com falha sua conta foi temporariamente desativada\nDeseja alterar sua senha para recuperar sua conta?")&&firebase.auth().sendPasswordResetEmail(this.email).then(()=>{alert("Email enviado com sucesso")}).catch(a=>{alert(a.message)}):alert(a.message)})}}document.querySelector("input[type='submit']").addEventListener("click",function(){const a=new FormData(document.querySelector("form")),c=a.get("email").replace(/ /g,""),d=a.get("senha").replace(/ /g,""),e=a.get("conectado");if(0==c.length||0==d.length)alert("Preencha todos os campos");else{"on"===e&&localStorage.setItem("sessionOn","sim");var f=new b(c,d);f.logar()}})}catch(a){alert("Erro "+a)}